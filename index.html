<html>
<head>
<script>
(function(s,u,r,f,l,y){s[f]=s[f]||{init:function(){s[f].q=arguments}};
l=u.createElement(r);y=u.getElementsByTagName(r)[0];l.async=1;
l.src='https://surfly.com/surfly.js';y.parentNode.insertBefore(l,y);})
(window,document,'script','Surfly');

var settings = {
// Surfly session options can be set here, or at the Company/Plan levels.
widget_key: '513065a5492743e6a6340aec09b7e4d1',
private_session: true, // to make sure only logged in agents can join the call
require_password: false,
};

Surfly.init(settings, function(init) {
        if (init.success && !Surfly.isInsideSession) {
            Surfly.session()
            .on("session_started", function(session, event) {
                // display the PIN of the current session
                document.querySelector("#sessidtarget").innerText = session.pin;
            })
            .on("viewer_joined", function(session, event) {
                // if the first viewer joins, redirect to a page of your choice
                if (event.count == 1) {
                session.relocate("https://www.surfly.com");
                }
            })
        }
        });
    
 function invoke()
    {
        var lang=(window.navigator.userLanguage || window.navigator.language);
        if(lang.includes("-"))
        {
        var remove_after= lang.indexOf('-');
        var lang =  lang.substring(0, remove_after);
        }
        alert("Language for Browser: "+lang);
        Surfly.session({language: lang}).create();
        //alert(Surfly.session({language: lang}).pin);
        Surfly.session({language: lang}).startLeader();
    }   
</script>
<style>

#btn-request-session {

}
#surfly-session-modal {
    position: absolute;
    margin: 200px 30%;
    background: lightcoral;
    padding: 10px;
    border-radius: 5px;
}
#session-agreement {

}
#session-id {

}
.hidden {
    display: none;
}
.modal-button {

}
.city {

}
</style>
</head>
<body>
 <label for="fname">Enter Pin:</label>
<input type="text" id="lname" name="lname" class="city"><br><br>
<button onclick= invoke();>Start a session</button>
</body>
</html>
