<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex"><script>
    //Add the Surfly snippet
    (function(s,u,r,f,l,y){s[f]=s[f]||{init:function(){s[f].q=arguments}};
    l=u.createElement(r);y=u.getElementsByTagName(r)[0];l.async=1;
    l.src='https://surfly.com/surfly.js';y.parentNode.insertBefore(l,y);})
    (window,document,'script','Surfly');

    // Surfly session options, you need to provide your own widget key
    var settings = {
        widget_key: "f387bd874b6b4bab9ccd4f7dae14de0d",
        block_until_agent_joins: false,
        hide_until_agent_joins: true,
        end_of_session_popup_url: "https://vipin-gh.surfly.com/SPS/"  // link to a survey page that will be shown after session end
    };

    // Initialize the JS API
    Surfly.init(settings, function(init) {
        if (init.success && !Surfly.isInsideSession) {
        }
    });

    function openSurflyPopup() {
        const sessions = Surfly.listSessions();
		if (sessions.length === 0) {
            Surfly.session().startLeader();
            var pin=Surfly.listSessions()[0].pin;
            document.querySelector("#sessidtarget").innerHTML = Surfly.listSessions()[0].pin;
        }
        else
        {
            var pin=Surfly.listSessions()[0].pin;
            document.querySelector("#sessidtarget").innerHTML = Surfly.listSessions()[0].pin;
        }
           		
    }
    </script>

<style>
.surfly-modal {
    position: fixed;
    z-index: 1;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0,0,0,.4);
    display: none;
    align-items: center;
    justify-content: center
}

    .surfly-modal.fadein {
        animation-duration: .2s;
        animation-name: fadein
    }
</style>
</head>
<body>
    <h1>Custom ID example</h1>
<button id="imgCoBrowsing1" onclick="openSurflyPopup()">

    <!-- Create a popup -->
<!-- Create a popup -->
<div id="surpopup" class="surfly-modal fadein">
    <div class="content easein">
        <div class="body">
            <p id="sessidtarget" class="sessionid">...</p>
        </div>
        <span id="closebutton" class="cancel surfly-popup-close"></span>
    </div>
</div>

    
</body>
</html>
