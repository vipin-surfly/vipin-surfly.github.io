<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Loading Webfuse Meeting</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      width: 100%;
      font-family: "Helvetica Neue", Arial, sans-serif;
      background: linear-gradient(135deg, #f4f6f8, #e8ecf1);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      text-align: center;
      color: #222;
    }

    .loader {
      border: 4px solid #ddd;
      border-top: 4px solid #007bff;
      border-radius: 50%;
      width: 48px;
      height: 48px;
      animation: spin 1s linear infinite;
      margin-bottom: 18px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    #message {
      font-size: 1.2rem;
      font-weight: 500;
      margin-bottom: 20px;
    }

    #fallbackBtn {
      display: inline-block;
      padding: 12px 18px;
      border-radius: 25px;
      border: none;
      background: #007bff;
      color: white;
      font-size: 1rem;
      text-decoration: none;
      box-shadow: 0 3px 6px rgba(0,0,0,0.15);
      transition: background 0.25s;
    }

    #fallbackBtn:hover {
      background: #0056c1;
    }
  </style>
</head>
<body>

  <div class="loader"></div>
  <div id="message">Loading <strong>Webfuse Meeting</strong>...</div>
  <a id="fallbackBtn" href="#">Open in Chrome</a>

  <script>
  (function () {
    var TARGET_URL = "https://webfuse.com/+travel_insurance/";
    var ua = navigator.userAgent || "";
    var isAndroid = /Android/i.test(ua);
    var isIOS = /iPhone|iPad|iPod/i.test(ua);

    function openAndroidIntent(url) {
      try {
        var u = new URL(url);
        var intent = "intent://" + u.host + u.pathname + u.search + u.hash +
                     "#Intent;scheme=" + u.protocol.replace(":", "") +
                     ";package=com.android.chrome;end";
        window.location.href = intent;
      } catch (e) {
        window.open(url, "_blank", "noopener,noreferrer");
      }
    }

    function openIOSChrome(url) {
      var chromeUrl = url.replace(/^https:/, "googlechromes:").replace(/^http:/, "googlechrome:");
      var fallbackTimer = setTimeout(function () {
        window.open(url, "_blank", "noopener,noreferrer");
      }, 800);
      try { window.location = chromeUrl; } catch (e) {}
    }

    function tryAutoOpenOnce() {
      if (sessionStorage.getItem("chromeAutoOpenAttempted")) return;
      sessionStorage.setItem("chromeAutoOpenAttempted", "1");
      if (isAndroid) setTimeout(function(){ openAndroidIntent(TARGET_URL); }, 400);
      else if (isIOS) setTimeout(function(){ openIOSChrome(TARGET_URL); }, 400);
    }

    document.addEventListener("DOMContentLoaded", tryAutoOpenOnce, { once: true });
    window.addEventListener("pageshow", function (e) {
      if (e.persisted) tryAutoOpenOnce();
    });

    document.getElementById("fallbackBtn").addEventListener("click", function (e) {
      e.preventDefault();
      if (isAndroid) openAndroidIntent(TARGET_URL);
      else if (isIOS) openIOSChrome(TARGET_URL);
      else window.open(TARGET_URL, "_blank", "noopener,noreferrer");
    });
  })();
  </script>

</body>
</html>
